@typeparam TItem
@using MudBlazor

<MudTable T="TItem" Items="Items" Hover="true" Striped="true" Dense="true" Class="custom-dynamic-table">
    <HeaderContent>
        @foreach (var col in Columns)
        {
            <MudTh Align="Center">@col.Title</MudTh>
        }
    </HeaderContent>
    <RowTemplate>
        @foreach (var col in Columns)
        {
            <MudTd Align="Center">
                @if (col.Template != null)
                {
                    @col.Template(context)
                }
                else
                {
                    @context?.GetType().GetProperty(col.Key)?.GetValue(context)
                }
            </MudTd>
        }
    </RowTemplate>
</MudTable>

<style>
    .custom-dynamic-table {
        border: 1px solid #c7d2fe;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 0 10px #e0e7ff;
    }

    .mud-table {
        background-color: #f9fafb;
    }

    .mud-table-header {
        background-color: #3b82f6;
        color: white;
        text-align: center;
    }

    .mud-table-cell {
        text-align: center;
    }
</style>

@code {
    public class TableColumn
    {
        public string Key { get; set; }
        public string Title { get; set; }
        public RenderFragment<TItem>? Template { get; set; }

        public TableColumn(string key, string title, RenderFragment<TItem>? template = null)
        {
            Key = key;
            Title = title;
            Template = template;
        }
    }

    [Parameter] public List<TItem> Items { get; set; } = new();
    [Parameter] public List<TableColumn> Columns { get; set; } = new();
}

@page "/MyTasks"
@using BlazorApp1.Models.TaskManagement
@using BlazorApp1.Components.Alert
@inherits BlazorApp1.Pages.MyTasks.MyTasksBase

<MudPaper Class="tasks-container-outer" Square="false" Elevation="0">
    <MudText Typo="Typo.h4" Class="tasks-title mt-2 mb-2">تسک‌های من</MudText>

    @if (ShowAlert)
    {
        <Alert Title="@AlertTaskTitle"
               Message="@AlertMessage"
               Severity="@AlertType"
               OnClose="() => ShowAlert = false" />
    }

    <MudPaper Class="tasks-box mt-1" Square="false" Elevation="0">
        @if (IsLoading)
        {
            <MudText Typo="Typo.subtitle1" Align="Align.Center" Class="loading-text">در حال دریافت تسک‌ها...</MudText>
        }
        else if (UserTasks.Count == 0)
        {
            <MudText Typo="Typo.subtitle1" Align="Align.Center" Class="no-tasks">هیچ تسکی برای شما ثبت نشده است.</MudText>
        }
        else
        {
            <MudStack Spacing="5" Class="tasks-card-list">
                @foreach (var ut in UserTasks)
                {
                    @if (ut != null && ut.TaskItem != null)
                    {
                        <MyTaskCard UserTask="ut" OnSaved="ReloadTasks" />
                    }
                }
            </MudStack>
        }
    </MudPaper>
</MudPaper>